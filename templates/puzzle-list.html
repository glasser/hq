{% extends "template.html" %}

{% block title %}Puzzles {{ puzzles.display_query }}{% endblock %}

{% block content %}
<h3>Puzzles {{ puzzles.display_query }}</h3>

<form action="{% url PuzzleCreateHandler %}" method="post">
  <table border='1'>
    <tr>
      <th>Puzzle</th>
      <th>Tags</th>
      {% for meta in puzzles.show_metas %}
        <th>{{ meta }}</th>
      {% endfor %}
    </tr>
    {% for puzzle in puzzles %}
      <tr class="puzzle-listing {{ puzzle.tags_as_css_classes }}">
        <td>
          <a href="{% url PuzzleHandler puzzle.key.id %}">{{ puzzle.title|escape }}</a>
        </td>
        <td>
          {% for tag in puzzle.tags %}
            <a href="{% url PuzzleListHandler tag %}">{{ tag }}</a>
          {% endfor %}
        </td>
        {% for meta in puzzles.show_meta_fields %}
          <td>
            {{ puzzle..meta|escape|urlize }}
          </td>
        {% endfor %}
      </tr>
    {% endfor %}
    <tr>
      <td>
        <input type="text" name="title" />
      </td>
      <td>
        <input type="text" name="tags" />
      </td>
      {% for meta in puzzles.show_meta_fields %}
        <td>
          <input type="text" name="{{ meta }}" />
        </td>
      {% endfor %}
    </tr>
  </table>

  <input type="submit" value="add puzzle" />
</form>

{% endblock content %}
